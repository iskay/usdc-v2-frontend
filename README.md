# USDC V2 Frontend

A modular Vite + React + TypeScript application that orchestrates cross-chain USDC deposits and payments between EVM wallets (via MetaMask) and Namada shielded accounts (via Namada Keychain). This repository focuses on clean architecture scaffolding, ready for future implementation of transaction builders, shielded sync, backend polling, and UI flows.

## Project Goals
- Provide a maintainable client foundation for multi-chain USDC flows (deposits and payments).
- Leverage Tailwind CSS and shadcn/ui for consistent, accessible UI building blocks.
- Use Jotai atoms for global application state, favouring functional patterns and clear module boundaries.
- Support wasm-based Namada SDK integrations (shielded sync, workers) via Vite plugins.
- Prepare routing, layout, and toast notifications so future features plug in with minimal boilerplate.

## Tech Stack
- **Vite + React + TypeScript** – fast build tooling with typed components.
- **Tailwind CSS v4 + shadcn/ui** – utility-first styling with Radix-based components.
- **Jotai** – lightweight global state management.
- **React Router v7** – multi-page app structure (`/dashboard`, `/send`, `/deposit`).
- **Sonner** – toast notifications with rich color support.
- **Axios** – REST client for backend integrations.
- **vite-plugin-wasm** & **vite-plugin-top-level-await** – enable Namada WASM SDK usage and worker orchestration.
- **ESLint + Prettier** – linting and formatting aligned with functional TypeScript patterns.

## Getting Started

### Prerequisites
- Node.js 18+
- npm (project uses lockfile generated by npm)

```bash
npm install
npm run dev
```

The dev server runs at `http://localhost:5173/`.

### Available Scripts
| Command | Description |
| --- | --- |
| `npm run dev` | Start the dev server with HMR |
| `npm run build` | Type-check and build production assets |
| `npm run preview` | Preview the production build |
| `npm run lint` | Run ESLint across the workspace |

## Project Structure
```
src/
 ├─ app/                # App shell, routes, bootstrap entry wiring
 ├─ pages/              # Route-level components (Dashboard, Deposit, SendPayment, History)
 ├─ components/
 │   ├─ layout/         # Navbar, Sidebar, ToastContainer
 │   ├─ wallet/         # WalletSelector, AccountDisplay
 │   ├─ tx/             # TxStatusCard, TxHistoryList
 │   └─ common/         # Button, Spinner, AlertBox
 ├─ atoms/              # Jotai atoms for wallet/tx/settings/shielded/app state
 ├─ services/
 │   ├─ bootstrap/      # Application initialization orchestration
 │   ├─ config/         # Chain config loader utilities
 │   ├─ wallet/         # Wallet service stubs + event helpers
 │   ├─ tx/             # Builders, submitter, tracker placeholders
 │   ├─ shielded/       # Shielded sync service + worker placeholder
 │   ├─ api/            # Axios backend client
 │   ├─ evm/, namada/   # Chain-specific utilities
 │   └─ storage/        # Persistence helpers (local storage wrappers)
 ├─ hooks/              # Custom hooks (useWallet, useTxTracker, useToast, useShieldedSync)
 ├─ types/              # Shared TypeScript interfaces for wallet, tx, shielded, api
 ├─ config/             # Chain configs, env accessors, constants
 └─ index.css           # Tailwind + shadcn theme tokens and base styles
```

All modules include `TODO` comments describing planned logic (MetaMask integration, Namada SDK calls, backend polling, etc.). These stubs make it clear where to extend functionality without coupling code prematurely.

## Styling & Transitions
- Tailwind is configured via `@tailwindcss/vite` with shadcn/ui’s neutral palette baked into `src/index.css`.
- Route transitions use Framer Motion (slide-in for deposit/send, fade for history/dashboard) defined in `src/app/App.tsx`.
- Theme tokens (colors, radii, sidebar styles) are declared using Tailwind v4 `@theme` APIs to keep design decisions centralized.
- Components are written with utility classes and the `cn` helper (`src/lib/utils.ts`) for conditional styling.

## State Management
- Jotai atoms live under `src/atoms/`. They track wallet connections, transactions, settings, and shielded sync state.
- Hooks (e.g., `useWallet`, `useTxTracker`) consume these atoms and expose higher-level actions with descriptive TODO markers for future service integration.

## Services & Workers
- All service modules return typed stubs. Replace the TODO sections once MetaMask APIs, Namada SDK, backend endpoints, and storage strategies are finalized.
- Shielded sync uses a dedicated worker (`src/services/shielded/worker.ts`) to keep WASM operations off the main thread.
- `vite-plugin-wasm` and `vite-plugin-top-level-await` are already wired in `vite.config.ts` to support future SDK imports.

## Testing & Quality
- `npm run lint` ensures code style and TypeScript correctness (project uses verbatim module syntax and type-only imports).
- `npm run build` confirms that type-checking and bundling succeed before merging changes.

## Next Steps
1. Implement wallet service logic (MetaMask account requests, Namada Keychain access).
2. Integrate transaction builders with WASM SDKs and backend APIs.
3. Flesh out UI forms with real validation, chain selectors, and service hooks.
4. Add shielded sync worker messaging and toast notifications for progress/errors.
5. Expand README with environment variable references once backend endpoints are locked in.

> Tip: Keep referencing the TODO blocks in services and hooks—they describe the expected implementation details and prevent logic from drifting into UI components.

## Configuration & Initialization
- Chain metadata lives in `public/evm-chains.json` (mirrors the mockup app). `fetchEvmChainsConfig()` loads it during bootstrap.
- `AppBootstrap` + `useAppInitialization()` load env/config data, stub wallet reconnection, and block route rendering until initialization succeeds.
- Future work: extend `initializeApplication()` to reconnect wallets, refresh balances, and prime the Namada SDK/worker.
